const l=document.getElementById("cards-container");function m(){fetch("/manager/get_requests",{method:"GET"}).then(d=>d.json()).then(d=>{if(l.innerHTML="",requests=d.active_requests,requests.length>0){document.getElementById("default-message").style.display="none";for(const e of requests){const a=document.createElement("div");a.classList.add("card");const s=document.createElement("img");s.classList.add("card-image"),s.src=e.url,a.appendChild(s);const n=document.createElement("div");n.classList.add("card-content");const o=document.createElement("p");o.classList.add("card-title"),o.innerHTML=`${e.car_name}<br>${e.email}`,n.appendChild(o);const t=document.createElement("p");t.classList.add("card-message"),t.innerHTML=`ŠPZ: ${e.spz}<br>Oblasť: ${e.location}<br>Od: ${e.time_from}<br>Do: ${e.time_to}`,n.appendChild(t);const c=document.createElement("div");c.classList.add("card-buttons");const i=document.createElement("button");i.classList.add("card-button","approve"),i.textContent="Povoliť",i.onclick=function(){u(e.request_id,e.time_from,e.time_to,e.car_name,e.email)},c.appendChild(i);const r=document.createElement("button");r.classList.add("card-button","deny"),r.textContent="Zamietnuť",r.onclick=function(){p(e.request_id,e.time_from,e.time_to,e.car_name,e.email)},c.appendChild(r),n.appendChild(c),a.appendChild(n),l.appendChild(a)}}else document.getElementById("default-message").style.display="block"})}function u(d,e,a,s,n){fetch("/manager/approve_requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({approval:!0,request_id:d,timeof:e,timeto:a,id_car:s,reciever:n})}).then(t=>t.json()).then(t=>{t.status===!0&&m()})}function p(d,e,a,s,n){fetch("/manager/approve_requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({approval:!1,request_id:d,timeof:e,timeto:a,id_car:s,reciever:n})}).then(t=>t.json()).then(t=>{t.status===!0&&m()})}document.addEventListener("DOMContentLoaded",()=>{m()});
